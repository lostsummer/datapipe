<?xml version="1.0" encoding="UTF-8"?>
<config>
    <httpserver enable="false">
    </httpserver>
<redis keycommonpre="EMoney.TongJiService"></redis>
<mongodb serverurl="mongodb://webloguser:weblogem123@172.31.37.73:27017/emoney_tongji" dbname="emoney_tongji"></mongodb>
<kafka serverurl="172.31.37.35:9092,172.31.37.36:9092,172.31.37.37:9092"></kafka>
<log filepath="/emoney/dp_api2/datapipe_task/logs"></log>
<tasks>
    <task taskid="PageView" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:PageView" targettype="mongodb" targetvalue="capped_datapipe_pageview"  triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.DataPipe:PageView_kafka" counterserver="172.31.23.16:6395" counterkey="EMoney.DataPipe:PageViewCounter"/>
    <task taskid="PageView_2" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:PageView" targettype="mongodb" targetvalue="capped_datapipe_pageview"  triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.DataPipe:PageView_kafka" counterserver="172.31.23.16:6395" counterkey="EMoney.DataPipe:PageViewCounter"/>
    <task taskid="PageView_Kafka" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:PageView_kafka" targettype="kafka" targetvalue="datapipe-pageview"  triggerserver="172.28.1.118:6379"  triggerqueue="EMoney.Tongji:PageView_pipe"/>
    <task taskid="PageClick" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:PageClick" targettype="mongodb" targetvalue="capped_datapipe_pageclick"  triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.DataPipe:PageClick_kafka" counterserver="172.31.23.16:6395" counterkey="EMoney.DataPipe:PageClickCounter"/>
    <task taskid="PageClick_Kafka" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:PageClick_kafka" targettype="kafka" targetvalue="datapipe-pageclick"  triggerserver="172.28.1.118:6379"  triggerqueue="EMoney.Tongji:PageClick_pipe"/>
    <task taskid="SoftLog_ForApp_Http" fromserver="172.28.1.118:6379" fromqueue="EMoney.DataPipe:SoftLog_ForApp" targettype="http" targetvalue="http://stat.m.emoney.cn/statistics/Uninstall/PopUp" />
    <task taskid="Page_OnlineTime" fromserver="172.28.1.118:6379" fromqueue="EMoney.Tongji:Page_OnlineTime" targettype="mongodb" targetvalue="capped_datapipe_page_onlinetime"/>

    <!-- 此队列由 .Net服务Emoney.Tongji 写入南汇redis @张健 @乔丽 -->
    <task taskid="UserLog_MongoDB" fromserver="172.28.1.118:6379" fromqueue="EMoney.Tongji:Data:UserLogStringQueue" targettype="mongodb" targetvalue="capped_tongji_userlog"  triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.Tongji:Data:UserLogStringQueue_triggerhttp"/>

    <!-- 此队列由 datapipe 写入万国redis 暂无数据引入 -->
    <task taskid="UserLog_MongoDB_2" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:UserLogStringQueue" targettype="mongodb" targetvalue="capped_tongji_userlog"  triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.Tongji:Data:UserLogStringQueue_triggerhttp"/>
    <task taskid="UserLog_Http" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:UserLogStringQueue_triggerhttp" targettype="http" targetvalue="http://172.28.1.146/api/CMP/1.0/Customer.saveDistributeCustomer?gate_appid=10076" />
    <task taskid="AppData_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:AppDataStringQueue" targettype="mongodb" targetvalue="capped_tongji_appdata" triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.Tongji:Data:AppDataStringQueue_triggerhttp"/>
    <task taskid="AppData_Http" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:AppDataStringQueue_triggerhttp" targettype="http" targetvalue="http://172.28.1.146/api/quanshang/1.0/SendAppData?gate_appid=10076" />

    <!-- 此队列由 .Net服务Emoney.Tongji 写入南汇redis, 注意key名中缀 "DataPipe" @张健 @乔丽 -->
    <task taskid="WebData_MongoDB" fromserver="172.28.1.118:6379" fromqueue="EMoney.Tongji:DataPipe:WebDataStringQueue" targettype="mongodb" targetvalue="capped_tongji_webdata" triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.Tongji:Data:WebDataStringQueue_triggerhttp"/>

    <!-- 此队列由 datapipe 写入万国redis 注意key名中缀 "Data", 暂无数据引入 -->
    <task taskid="WebData_MongoDB_2" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:WebDataStringQueue" targettype="mongodb" targetvalue="capped_tongji_webdata" triggerserver="172.31.23.16:6395"  triggerqueue="EMoney.Tongji:Data:WebDataStringQueue_triggerhttp"/>
    <task taskid="WebDataTrigger_Http" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:WebDataStringQueue_triggerhttp" targettype="http" targetvalue="http://172.28.1.146/api/CMP/1.0/customer.userregister?gate_appid=10076" />
    <task taskid="ADView_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:ADViewStringQueue" targettype="mongodb" targetvalue="capped_tongji_adview" triggerserver="172.31.23.16:6395" triggerqueue="EMoney.Tongji:DataPipe:ADView_kafka"/>
    <task taskid="ADView_Kafka" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:DataPipe:ADView_kafka" targettype="kafka" targetvalue="datapipe-adview"/>
    <task taskid="ADClick_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:ADClickStringQueue" targettype="mongodb" targetvalue="capped_tongji_adclick" triggerserver="172.31.23.16:6395" triggerqueue="EMoney.Tongji:DataPipe:ADClick_kafka"/>
    <task taskid="ADClick_Kafka" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:DataPipe:ADClick_kafka" targettype="kafka" targetvalue="datapipe-adclick"/>
    <task taskid="FrontEndLog_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:FrontEndLogJsonQueue" targettype="mongodb" targetvalue="capped_tongji_frontendlog"/>
    <task taskid="SoftAction_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:SoftActionLogJsonQueue" targettype="mongodb" targetvalue="capped_tongji_softaction"/>
    <task taskid="SoftAction2_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:SoftActionLogJsonQueue" targettype="mongodb" targetvalue="capped_tongji_softaction"/>
    <task taskid="SoftAction3_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:SoftActionLogJsonQueue" targettype="mongodb" targetvalue="capped_tongji_softaction"/>
    <task taskid="SoftAction_free_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:SoftActionLogJsonQueue_FreeUser" targettype="mongodb" targetvalue="capped_tongji_softaction_free" triggerserver="172.31.23.16:6395" triggerqueue="EMoney.Tongji:DataPipe:SoftAction_kafka"/>
    <task taskid="SoftAction2_free_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:SoftActionLogJsonQueue_FreeUser" targettype="mongodb" targetvalue="capped_tongji_softaction_free" triggerserver="172.31.23.16:6395" triggerqueue="EMoney.Tongji:DataPipe:SoftAction_kafka"/>
    <task taskid="SoftAction_Kafka" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:DataPipe:SoftAction_kafka" targettype="kafka" targetvalue="datapipe-softaction"/>
    <!-- <task taskid="Mobile_PageRecords" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:Mobile:PageRecords" targettype="mongodb" targetvalue="capped_mobile_pagerecords"/> -->
    <!-- <task taskid="Mobile_EventRecords" fromserver="172.31.23.16:6395" fromqueue="EMoney.DataPipe:Mobile:EventRecords" targettype="mongodb" targetvalue="capped_mobile_eventrecords"/> -->
    <task taskid="Counter_MongoDB" fromserver="172.31.23.16:6395" fromqueue="EMoney.Tongji:Data:CounterStringQueue" targettype="mongodb" targetvalue="capped_datapipe_commoncounter_record"/>
    <task taskid="SoftLog" fromserver="172.28.1.118:6379" fromqueue="EMoney.Tongji:SoftLogStringQueue" targettype="mongodb" targetvalue="capped_tongji_softlog" triggerserver="172.28.1.118:6379" triggerqueue="EMoney.Tongji:SoftLogForSQLServer"/>
</tasks>
</config>
